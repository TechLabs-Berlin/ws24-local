{"version":3,"names":["RNSkReadonlyValue","RNSkValue","constructor","value","_unsubscribe","undefined","current","update","unsubscribe","_animation","cancel","subscribe","animation","addListener","animationDidUpdate","bind","start","v"],"sources":["RNSkValue.ts"],"sourcesContent":["import type { SkiaAnimation, SkiaValue } from \"../types\";\n\nimport { RNSkReadonlyValue } from \"./RNSkReadonlyValue\";\n\nexport class RNSkValue<T> extends RNSkReadonlyValue<T> implements SkiaValue<T> {\n  constructor(value: T) {\n    super(value);\n    this._unsubscribe = undefined;\n  }\n\n  public set current(value: T) {\n    this.update(value);\n  }\n\n  public get current(): T {\n    return super.current;\n  }\n\n  private _unsubscribe: (() => void) | undefined;\n\n  private unsubscribe() {\n    if (this._unsubscribe) {\n      this._unsubscribe();\n      this._unsubscribe = undefined;\n    }\n    if (this._animation) {\n      this._animation.cancel();\n      this._animation = undefined;\n    }\n  }\n\n  private subscribe(animation: SkiaAnimation | undefined) {\n    this.unsubscribe();\n    if (animation) {\n      this._animation = animation;\n      this._unsubscribe = animation.addListener(\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        this.animationDidUpdate.bind(this)\n      );\n      this._animation.start();\n    }\n  }\n\n  private animationDidUpdate(value: T) {\n    this.update(value);\n  }\n\n  private _animation: SkiaAnimation | undefined;\n  public get animation(): SkiaAnimation | undefined {\n    return this._animation;\n  }\n\n  public set animation(v: SkiaAnimation | undefined) {\n    this.subscribe(v);\n  }\n}\n"],"mappings":";;AAEA,SAASA,iBAAT,QAAkC,qBAAlC;AAEA,OAAO,MAAMC,SAAN,SAA2BD,iBAA3B,CAAwE;EAC7EE,WAAW,CAACC,KAAD,EAAW;IACpB,MAAMA,KAAN;;IADoB;;IAAA;;IAEpB,KAAKC,YAAL,GAAoBC,SAApB;EACD;;EAEiB,IAAPC,OAAO,CAACH,KAAD,EAAW;IAC3B,KAAKI,MAAL,CAAYJ,KAAZ;EACD;;EAEiB,IAAPG,OAAO,GAAM;IACtB,OAAO,MAAMA,OAAb;EACD;;EAIOE,WAAW,GAAG;IACpB,IAAI,KAAKJ,YAAT,EAAuB;MACrB,KAAKA,YAAL;;MACA,KAAKA,YAAL,GAAoBC,SAApB;IACD;;IACD,IAAI,KAAKI,UAAT,EAAqB;MACnB,KAAKA,UAAL,CAAgBC,MAAhB;;MACA,KAAKD,UAAL,GAAkBJ,SAAlB;IACD;EACF;;EAEOM,SAAS,CAACC,SAAD,EAAuC;IACtD,KAAKJ,WAAL;;IACA,IAAII,SAAJ,EAAe;MACb,KAAKH,UAAL,GAAkBG,SAAlB;MACA,KAAKR,YAAL,GAAoBQ,SAAS,CAACC,WAAV,EAClB;MACA;MACA,KAAKC,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,CAHkB,CAApB;;MAKA,KAAKN,UAAL,CAAgBO,KAAhB;IACD;EACF;;EAEOF,kBAAkB,CAACX,KAAD,EAAW;IACnC,KAAKI,MAAL,CAAYJ,KAAZ;EACD;;EAGmB,IAATS,SAAS,GAA8B;IAChD,OAAO,KAAKH,UAAZ;EACD;;EAEmB,IAATG,SAAS,CAACK,CAAD,EAA+B;IACjD,KAAKN,SAAL,CAAeM,CAAf;EACD;;AAnD4E"}