{"version":3,"names":["BlendMode","PaintStyle","StrokeCap","StrokeJoin","enumKey","JsiDeclarationNode","DeclarationContext","JsiDrawingContext","constructor","Skia","canvas","paint","Paint","paints","declarationCtx","length","save","childPaint","copy","push","restore","pop","saveAndConcat","node","cache","ConcatablePaint","isPristine","concatTo","declCtx","props","getProps","children","setColor","color","undefined","Color","setStrokeWidth","strokeWidth","setBlendMode","blendMode","setStyle","style","setStrokeJoin","strokeJoin","setStrokeCap","strokeCap","setStrokeMiter","strokeMiter","setOpacity","opacity","setAntiAlias","antiAlias","forEach","child","decorate","colorFilter","colorFilters","popAllAsOne","imageFilter","imageFilters","shader","shaders","maskFilter","maskFilters","pathEffect","pathEffects","setImageFilter","setShader","setPathEffect","setColorFilter","setMaskFilter","enum","value","key","setValue","pristine","getColor","_color","getStrokeWidth","_strokeWidth","getBlendMode","_blendMode","getStyle","_style","getStrokeJoin","_strokeJoin","getStrokeCap","_strokeCap","getStrokeMiter","_strokeMiter","getOpacity","_opacity","getAntiAlias","_antiAlias","getImageFilter","_imageFilter","getShader","_shader","getPathEffect","_pathEffect","getColorFilter","_colorFilter","getMaskFilter","_maskFilter","setAlphaf","getAlphaf","currentOpacity"],"sources":["DrawingContext.ts"],"sourcesContent":["import type {\n  SkCanvas,\n  SkColor,\n  SkColorFilter,\n  SkImageFilter,\n  SkMaskFilter,\n  SkPaint,\n  SkPathEffect,\n  SkShader,\n  Skia,\n} from \"../../skia/types\";\nimport { BlendMode, PaintStyle, StrokeCap, StrokeJoin } from \"../../skia/types\";\nimport { enumKey } from \"../nodes/datatypes/Enum\";\nimport { JsiDeclarationNode } from \"../nodes/Node\";\n\nimport type { PaintProps, SkEnum } from \"./Common\";\nimport { DeclarationContext } from \"./DeclarationContext\";\nimport type { Node } from \"./Node\";\n\nexport interface DrawingContext {\n  canvas: SkCanvas;\n  paint: SkPaint;\n  saveAndConcat(node: Node<PaintProps>, cache?: SkPaint): boolean;\n  restore(): void;\n  declarationCtx: DeclarationContext;\n}\n\nexport class JsiDrawingContext implements DrawingContext {\n  paints: SkPaint[];\n\n  declarationCtx: DeclarationContext;\n\n  constructor(private readonly Skia: Skia, public readonly canvas: SkCanvas) {\n    const paint = this.Skia.Paint();\n    this.paints = [paint];\n    this.declarationCtx = new DeclarationContext(Skia);\n  }\n\n  get paint() {\n    return this.paints[this.paints.length - 1];\n  }\n\n  private save() {\n    const childPaint = this.paint.copy();\n    this.paints.push(childPaint);\n  }\n\n  restore(): void {\n    this.paints.pop();\n  }\n\n  saveAndConcat(node: Node<PaintProps>, cache?: SkPaint) {\n    if (cache) {\n      this.paints.push(cache);\n      return true;\n    }\n    const paint = new ConcatablePaint(this.Skia, this.declarationCtx, node);\n    if (!paint.isPristine()) {\n      this.save();\n      paint.concatTo(this.paint);\n      return true;\n    }\n    return false;\n  }\n}\n\nclass ConcatablePaint {\n  private pristine = true;\n\n  _color?: SkColor;\n  _strokeWidth?: number;\n  _blendMode?: BlendMode;\n  _style?: PaintStyle;\n  _strokeJoin?: StrokeJoin;\n  _strokeCap?: StrokeCap;\n  _strokeMiter?: number;\n  _opacity = 1;\n  _antiAlias?: boolean;\n\n  _imageFilter?: SkImageFilter;\n  _shader?: SkShader;\n  _pathEffect?: SkPathEffect;\n  _colorFilter?: SkColorFilter;\n  _maskFilter?: SkMaskFilter;\n\n  constructor(Skia: Skia, declCtx: DeclarationContext, node: Node<PaintProps>) {\n    const props = node.getProps();\n    const children = node.children();\n    this.setColor(\n      props.color !== undefined ? Skia.Color(props.color) : props.color\n    );\n    this.setStrokeWidth(props.strokeWidth);\n    this.setBlendMode(props.blendMode);\n    this.setStyle(props.style);\n    this.setStrokeJoin(props.strokeJoin);\n    this.setStrokeCap(props.strokeCap);\n    this.setStrokeMiter(props.strokeMiter);\n    this.setOpacity(props.opacity);\n    this.setAntiAlias(props.antiAlias);\n    declCtx.save();\n    children.forEach((child) => {\n      if (child instanceof JsiDeclarationNode) {\n        child.decorate(declCtx);\n      }\n    });\n    const colorFilter = declCtx.colorFilters.popAllAsOne();\n    const imageFilter = declCtx.imageFilters.popAllAsOne();\n    const shader = declCtx.shaders.pop();\n    const maskFilter = declCtx.maskFilters.pop();\n    const pathEffect = declCtx.pathEffects.popAllAsOne();\n    declCtx.restore();\n    if (imageFilter) {\n      this.setImageFilter(imageFilter);\n    }\n    if (shader) {\n      this.setShader(shader);\n    }\n    if (pathEffect) {\n      this.setPathEffect(pathEffect);\n    }\n    if (colorFilter) {\n      this.setColorFilter(colorFilter);\n    }\n    if (maskFilter) {\n      this.setMaskFilter(maskFilter);\n    }\n  }\n\n  private enum<T>(value: T, key?: Uncapitalize<string>) {\n    if (key !== undefined) {\n      return value[enumKey(key) as keyof T];\n    }\n    return undefined;\n  }\n\n  private setValue<T extends keyof typeof this>(\n    key: T,\n    value?: typeof this[T]\n  ) {\n    if (value !== undefined) {\n      this[key] = value;\n      this.pristine = false;\n    }\n  }\n\n  setColor(color?: SkColor) {\n    this.setValue(\"_color\", color);\n  }\n\n  getColor() {\n    return this._color;\n  }\n\n  setStrokeWidth(strokeWidth?: number) {\n    this.setValue(\"_strokeWidth\", strokeWidth);\n  }\n\n  getStrokeWidth() {\n    return this._strokeWidth;\n  }\n\n  setBlendMode(blendMode?: SkEnum<typeof BlendMode>) {\n    this.setValue(\"_blendMode\", this.enum(BlendMode, blendMode));\n  }\n\n  getBlendMode() {\n    return this._blendMode;\n  }\n\n  setStyle(style?: SkEnum<typeof PaintStyle>) {\n    this.setValue(\"_style\", this.enum(PaintStyle, style));\n  }\n\n  getStyle() {\n    return this._style;\n  }\n\n  setStrokeJoin(strokeJoin?: SkEnum<typeof StrokeJoin>) {\n    this.setValue(\"_strokeJoin\", this.enum(StrokeJoin, strokeJoin));\n  }\n\n  getStrokeJoin() {\n    return this._strokeJoin;\n  }\n\n  setStrokeCap(strokeCap?: SkEnum<typeof StrokeCap>) {\n    this.setValue(\"_strokeCap\", this.enum(StrokeCap, strokeCap));\n  }\n\n  getStrokeCap() {\n    return this._strokeCap;\n  }\n\n  setStrokeMiter(strokeMiter?: number) {\n    this.setValue(\"_strokeMiter\", strokeMiter);\n  }\n\n  getStrokeMiter() {\n    return this._strokeMiter;\n  }\n\n  setOpacity(opacity?: number) {\n    this.setValue(\"_opacity\", opacity);\n  }\n\n  getOpacity() {\n    return this._opacity;\n  }\n\n  setAntiAlias(antiAlias?: boolean) {\n    this.setValue(\"_antiAlias\", antiAlias);\n  }\n\n  getAntiAlias() {\n    return this._antiAlias;\n  }\n\n  setImageFilter(imageFilter?: SkImageFilter) {\n    this.setValue(\"_imageFilter\", imageFilter);\n  }\n\n  getImageFilter() {\n    return this._imageFilter;\n  }\n\n  setShader(shader?: SkShader) {\n    this.setValue(\"_shader\", shader);\n  }\n\n  getShader() {\n    return this._shader;\n  }\n\n  setPathEffect(pathEffect?: SkPathEffect) {\n    this.setValue(\"_pathEffect\", pathEffect);\n  }\n\n  getPathEffect() {\n    return this._pathEffect;\n  }\n\n  setColorFilter(colorFilter?: SkColorFilter) {\n    this.setValue(\"_colorFilter\", colorFilter);\n  }\n\n  getColorFilter() {\n    return this._colorFilter;\n  }\n\n  setMaskFilter(maskFilter?: SkMaskFilter) {\n    this.setValue(\"_maskFilter\", maskFilter);\n  }\n\n  getMaskFilter() {\n    return this._maskFilter;\n  }\n\n  isPristine() {\n    return this.pristine;\n  }\n\n  concatTo(paint: SkPaint) {\n    if (this._opacity !== undefined) {\n      paint.setAlphaf(paint.getAlphaf() * this._opacity);\n    }\n    if (this._color !== undefined) {\n      const currentOpacity = paint.getAlphaf();\n      paint.setShader(null);\n      paint.setColor(this._color);\n      paint.setAlphaf(currentOpacity * paint.getAlphaf());\n    }\n    if (this._strokeWidth !== undefined) {\n      paint.setStrokeWidth(this._strokeWidth);\n    }\n    if (this._blendMode !== undefined) {\n      paint.setBlendMode(this._blendMode);\n    }\n    if (this._style !== undefined) {\n      paint.setStyle(this._style);\n    }\n    if (this._strokeJoin !== undefined) {\n      paint.setStrokeJoin(this._strokeJoin);\n    }\n    if (this._strokeCap !== undefined) {\n      paint.setStrokeCap(this._strokeCap);\n    }\n    if (this._strokeMiter !== undefined) {\n      paint.setStrokeMiter(this._strokeMiter);\n    }\n    if (this._antiAlias !== undefined) {\n      paint.setAntiAlias(this._antiAlias);\n    }\n    if (this._imageFilter !== undefined) {\n      paint.setImageFilter(this._imageFilter);\n    }\n    if (this._shader !== undefined) {\n      paint.setShader(this._shader);\n    }\n    if (this._pathEffect !== undefined) {\n      paint.setPathEffect(this._pathEffect);\n    }\n    if (this._colorFilter !== undefined) {\n      paint.setColorFilter(this._colorFilter);\n    }\n    if (this._maskFilter !== undefined) {\n      paint.setMaskFilter(this._maskFilter);\n    }\n  }\n}\n"],"mappings":"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"}