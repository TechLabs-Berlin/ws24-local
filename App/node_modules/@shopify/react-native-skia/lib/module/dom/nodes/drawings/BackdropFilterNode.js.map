{"version":3,"names":["NodeType","JsiDrawingNode","JsiDeclarationNode","BackdropFilterNode","constructor","ctx","props","BackdropFilter","deriveProps","draw","canvas","declarationCtx","child","_children","imageFilter","save","decorate","imgf","imageFilters","pop","cf","colorFilters","Skia","ImageFilter","MakeColorFilter","restore","saveLayer","undefined"],"sources":["BackdropFilterNode.ts"],"sourcesContent":["import type { ChildrenProps, DrawingContext } from \"../../types\";\nimport { NodeType } from \"../../types\";\nimport { JsiDrawingNode } from \"../DrawingNode\";\nimport type { NodeContext } from \"../Node\";\nimport { JsiDeclarationNode } from \"../Node\";\nimport type { SkImageFilter } from \"../../../skia/types/ImageFilter/ImageFilter\";\n\nexport class BackdropFilterNode extends JsiDrawingNode<ChildrenProps, null> {\n  constructor(ctx: NodeContext, props: ChildrenProps) {\n    super(ctx, NodeType.BackdropFilter, props);\n  }\n\n  protected deriveProps() {\n    return null;\n  }\n\n  draw({ canvas, declarationCtx }: DrawingContext) {\n    const child = this._children[0];\n    let imageFilter: SkImageFilter | null = null;\n    if (child instanceof JsiDeclarationNode) {\n      declarationCtx.save();\n      child.decorate(declarationCtx);\n      const imgf = declarationCtx.imageFilters.pop();\n      if (imgf) {\n        imageFilter = imgf;\n      } else {\n        const cf = declarationCtx.colorFilters.pop();\n        if (cf) {\n          imageFilter = this.Skia.ImageFilter.MakeColorFilter(cf, null);\n        }\n      }\n      declarationCtx.restore();\n    }\n    canvas.saveLayer(undefined, null, imageFilter);\n    canvas.restore();\n  }\n}\n"],"mappings":"AACA,SAASA,QAAT,QAAyB,aAAzB;AACA,SAASC,cAAT,QAA+B,gBAA/B;AAEA,SAASC,kBAAT,QAAmC,SAAnC;AAGA,OAAO,MAAMC,kBAAN,SAAiCF,cAAjC,CAAqE;EAC1EG,WAAW,CAACC,GAAD,EAAmBC,KAAnB,EAAyC;IAClD,MAAMD,GAAN,EAAWL,QAAQ,CAACO,cAApB,EAAoCD,KAApC;EACD;;EAESE,WAAW,GAAG;IACtB,OAAO,IAAP;EACD;;EAEDC,IAAI,OAA6C;IAAA,IAA5C;MAAEC,MAAF;MAAUC;IAAV,CAA4C;IAC/C,MAAMC,KAAK,GAAG,KAAKC,SAAL,CAAe,CAAf,CAAd;IACA,IAAIC,WAAiC,GAAG,IAAxC;;IACA,IAAIF,KAAK,YAAYV,kBAArB,EAAyC;MACvCS,cAAc,CAACI,IAAf;MACAH,KAAK,CAACI,QAAN,CAAeL,cAAf;MACA,MAAMM,IAAI,GAAGN,cAAc,CAACO,YAAf,CAA4BC,GAA5B,EAAb;;MACA,IAAIF,IAAJ,EAAU;QACRH,WAAW,GAAGG,IAAd;MACD,CAFD,MAEO;QACL,MAAMG,EAAE,GAAGT,cAAc,CAACU,YAAf,CAA4BF,GAA5B,EAAX;;QACA,IAAIC,EAAJ,EAAQ;UACNN,WAAW,GAAG,KAAKQ,IAAL,CAAUC,WAAV,CAAsBC,eAAtB,CAAsCJ,EAAtC,EAA0C,IAA1C,CAAd;QACD;MACF;;MACDT,cAAc,CAACc,OAAf;IACD;;IACDf,MAAM,CAACgB,SAAP,CAAiBC,SAAjB,EAA4B,IAA5B,EAAkCb,WAAlC;IACAJ,MAAM,CAACe,OAAP;EACD;;AA5ByE"}