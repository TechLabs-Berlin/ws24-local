{"version":3,"names":["BlendMode","DeclarationType","NodeType","JsiDeclarationNode","enumKey","composeDeclarations","BlendNode","constructor","ctx","props","ImageFilter","Blend","decorate","decorateChildren","Skia","blend","mode","imageFilters","popAll","length","composer","MakeBlend","bind","push","shaders","Shader"],"sources":["BlendNode.ts"],"sourcesContent":["import type { BlendProps } from \"../../types/ImageFilters\";\nimport { BlendMode } from \"../../../skia/types\";\nimport { DeclarationType, NodeType } from \"../../types/NodeType\";\nimport type { NodeContext } from \"../Node\";\nimport { JsiDeclarationNode } from \"../Node\";\nimport { enumKey } from \"../datatypes\";\nimport type { DeclarationContext } from \"../../types/DeclarationContext\";\nimport { composeDeclarations } from \"../../types/DeclarationContext\";\n\nexport class BlendNode extends JsiDeclarationNode<BlendProps> {\n  constructor(ctx: NodeContext, props: BlendProps) {\n    super(ctx, DeclarationType.ImageFilter, NodeType.Blend, props);\n  }\n\n  decorate(ctx: DeclarationContext) {\n    this.decorateChildren(ctx);\n    const { Skia } = this;\n    const blend = BlendMode[enumKey(this.props.mode)];\n    // Blend ImageFilters\n    const imageFilters = ctx.imageFilters.popAll();\n    if (imageFilters.length > 0) {\n      const composer = Skia.ImageFilter.MakeBlend.bind(Skia.ImageFilter, blend);\n      ctx.imageFilters.push(composeDeclarations(imageFilters, composer));\n    }\n    // Blend Shaders\n    const shaders = ctx.shaders.popAll();\n    if (shaders.length > 0) {\n      const composer = Skia.Shader.MakeBlend.bind(Skia.Shader, blend);\n      ctx.shaders.push(composeDeclarations(shaders, composer));\n    }\n  }\n}\n"],"mappings":"AACA,SAASA,SAAT,QAA0B,qBAA1B;AACA,SAASC,eAAT,EAA0BC,QAA1B,QAA0C,sBAA1C;AAEA,SAASC,kBAAT,QAAmC,SAAnC;AACA,SAASC,OAAT,QAAwB,cAAxB;AAEA,SAASC,mBAAT,QAAoC,gCAApC;AAEA,OAAO,MAAMC,SAAN,SAAwBH,kBAAxB,CAAuD;EAC5DI,WAAW,CAACC,GAAD,EAAmBC,KAAnB,EAAsC;IAC/C,MAAMD,GAAN,EAAWP,eAAe,CAACS,WAA3B,EAAwCR,QAAQ,CAACS,KAAjD,EAAwDF,KAAxD;EACD;;EAEDG,QAAQ,CAACJ,GAAD,EAA0B;IAChC,KAAKK,gBAAL,CAAsBL,GAAtB;IACA,MAAM;MAAEM;IAAF,IAAW,IAAjB;IACA,MAAMC,KAAK,GAAGf,SAAS,CAACI,OAAO,CAAC,KAAKK,KAAL,CAAWO,IAAZ,CAAR,CAAvB,CAHgC,CAIhC;;IACA,MAAMC,YAAY,GAAGT,GAAG,CAACS,YAAJ,CAAiBC,MAAjB,EAArB;;IACA,IAAID,YAAY,CAACE,MAAb,GAAsB,CAA1B,EAA6B;MAC3B,MAAMC,QAAQ,GAAGN,IAAI,CAACJ,WAAL,CAAiBW,SAAjB,CAA2BC,IAA3B,CAAgCR,IAAI,CAACJ,WAArC,EAAkDK,KAAlD,CAAjB;MACAP,GAAG,CAACS,YAAJ,CAAiBM,IAAjB,CAAsBlB,mBAAmB,CAACY,YAAD,EAAeG,QAAf,CAAzC;IACD,CAT+B,CAUhC;;;IACA,MAAMI,OAAO,GAAGhB,GAAG,CAACgB,OAAJ,CAAYN,MAAZ,EAAhB;;IACA,IAAIM,OAAO,CAACL,MAAR,GAAiB,CAArB,EAAwB;MACtB,MAAMC,QAAQ,GAAGN,IAAI,CAACW,MAAL,CAAYJ,SAAZ,CAAsBC,IAAtB,CAA2BR,IAAI,CAACW,MAAhC,EAAwCV,KAAxC,CAAjB;MACAP,GAAG,CAACgB,OAAJ,CAAYD,IAAZ,CAAiBlB,mBAAmB,CAACmB,OAAD,EAAUJ,QAAV,CAApC;IACD;EACF;;AArB2D"}