{"version":3,"names":["JsiDrawingContext","Skia","SkiaRoot","drawAsImage","element","width","height","surface","Surface","MakeOffscreen","Error","canvas","getCanvas","root","render","ctx","dom","flush","makeImageSnapshot"],"sources":["Offscreen.tsx"],"sourcesContent":["import type { ReactElement } from \"react\";\n\nimport { JsiDrawingContext } from \"../dom/types\";\nimport { Skia } from \"../skia\";\n\nimport { SkiaRoot } from \"./Reconciler\";\n\nexport const drawAsImage = (\n  element: ReactElement,\n  width: number,\n  height: number\n) => {\n  const surface = Skia.Surface.MakeOffscreen(width, height);\n  if (!surface) {\n    throw new Error(\"Could not create offscreen surface\");\n  }\n  const canvas = surface.getCanvas();\n  const root = new SkiaRoot(Skia);\n  root.render(element);\n  const ctx = new JsiDrawingContext(Skia, canvas);\n  root.dom.render(ctx);\n  surface.flush();\n  return surface.makeImageSnapshot();\n};\n"],"mappings":"AAEA,SAASA,iBAAT,QAAkC,cAAlC;AACA,SAASC,IAAT,QAAqB,SAArB;AAEA,SAASC,QAAT,QAAyB,cAAzB;AAEA,OAAO,MAAMC,WAAW,GAAG,CACzBC,OADyB,EAEzBC,KAFyB,EAGzBC,MAHyB,KAItB;EACH,MAAMC,OAAO,GAAGN,IAAI,CAACO,OAAL,CAAaC,aAAb,CAA2BJ,KAA3B,EAAkCC,MAAlC,CAAhB;;EACA,IAAI,CAACC,OAAL,EAAc;IACZ,MAAM,IAAIG,KAAJ,CAAU,oCAAV,CAAN;EACD;;EACD,MAAMC,MAAM,GAAGJ,OAAO,CAACK,SAAR,EAAf;EACA,MAAMC,IAAI,GAAG,IAAIX,QAAJ,CAAaD,IAAb,CAAb;EACAY,IAAI,CAACC,MAAL,CAAYV,OAAZ;EACA,MAAMW,GAAG,GAAG,IAAIf,iBAAJ,CAAsBC,IAAtB,EAA4BU,MAA5B,CAAZ;EACAE,IAAI,CAACG,GAAL,CAASF,MAAT,CAAgBC,GAAhB;EACAR,OAAO,CAACU,KAAR;EACA,OAAOV,OAAO,CAACW,iBAAR,EAAP;AACD,CAhBM"}