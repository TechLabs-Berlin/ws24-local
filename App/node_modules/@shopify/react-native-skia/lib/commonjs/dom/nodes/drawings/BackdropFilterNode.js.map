{"version":3,"names":["BackdropFilterNode","JsiDrawingNode","constructor","ctx","props","NodeType","BackdropFilter","deriveProps","draw","canvas","declarationCtx","child","_children","imageFilter","JsiDeclarationNode","save","decorate","imgf","imageFilters","pop","cf","colorFilters","Skia","ImageFilter","MakeColorFilter","restore","saveLayer","undefined"],"sources":["BackdropFilterNode.ts"],"sourcesContent":["import type { ChildrenProps, DrawingContext } from \"../../types\";\nimport { NodeType } from \"../../types\";\nimport { JsiDrawingNode } from \"../DrawingNode\";\nimport type { NodeContext } from \"../Node\";\nimport { JsiDeclarationNode } from \"../Node\";\nimport type { SkImageFilter } from \"../../../skia/types/ImageFilter/ImageFilter\";\n\nexport class BackdropFilterNode extends JsiDrawingNode<ChildrenProps, null> {\n  constructor(ctx: NodeContext, props: ChildrenProps) {\n    super(ctx, NodeType.BackdropFilter, props);\n  }\n\n  protected deriveProps() {\n    return null;\n  }\n\n  draw({ canvas, declarationCtx }: DrawingContext) {\n    const child = this._children[0];\n    let imageFilter: SkImageFilter | null = null;\n    if (child instanceof JsiDeclarationNode) {\n      declarationCtx.save();\n      child.decorate(declarationCtx);\n      const imgf = declarationCtx.imageFilters.pop();\n      if (imgf) {\n        imageFilter = imgf;\n      } else {\n        const cf = declarationCtx.colorFilters.pop();\n        if (cf) {\n          imageFilter = this.Skia.ImageFilter.MakeColorFilter(cf, null);\n        }\n      }\n      declarationCtx.restore();\n    }\n    canvas.saveLayer(undefined, null, imageFilter);\n    canvas.restore();\n  }\n}\n"],"mappings":";;;;;;;AACA;;AACA;;AAEA;;AAGO,MAAMA,kBAAN,SAAiCC,2BAAjC,CAAqE;EAC1EC,WAAW,CAACC,GAAD,EAAmBC,KAAnB,EAAyC;IAClD,MAAMD,GAAN,EAAWE,eAAA,CAASC,cAApB,EAAoCF,KAApC;EACD;;EAESG,WAAW,GAAG;IACtB,OAAO,IAAP;EACD;;EAEDC,IAAI,OAA6C;IAAA,IAA5C;MAAEC,MAAF;MAAUC;IAAV,CAA4C;IAC/C,MAAMC,KAAK,GAAG,KAAKC,SAAL,CAAe,CAAf,CAAd;IACA,IAAIC,WAAiC,GAAG,IAAxC;;IACA,IAAIF,KAAK,YAAYG,wBAArB,EAAyC;MACvCJ,cAAc,CAACK,IAAf;MACAJ,KAAK,CAACK,QAAN,CAAeN,cAAf;MACA,MAAMO,IAAI,GAAGP,cAAc,CAACQ,YAAf,CAA4BC,GAA5B,EAAb;;MACA,IAAIF,IAAJ,EAAU;QACRJ,WAAW,GAAGI,IAAd;MACD,CAFD,MAEO;QACL,MAAMG,EAAE,GAAGV,cAAc,CAACW,YAAf,CAA4BF,GAA5B,EAAX;;QACA,IAAIC,EAAJ,EAAQ;UACNP,WAAW,GAAG,KAAKS,IAAL,CAAUC,WAAV,CAAsBC,eAAtB,CAAsCJ,EAAtC,EAA0C,IAA1C,CAAd;QACD;MACF;;MACDV,cAAc,CAACe,OAAf;IACD;;IACDhB,MAAM,CAACiB,SAAP,CAAiBC,SAAjB,EAA4B,IAA5B,EAAkCd,WAAlC;IACAJ,MAAM,CAACgB,OAAP;EACD;;AA5ByE"}