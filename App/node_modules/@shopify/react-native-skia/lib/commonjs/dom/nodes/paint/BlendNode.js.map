{"version":3,"names":["BlendNode","JsiDeclarationNode","constructor","ctx","props","DeclarationType","ImageFilter","NodeType","Blend","decorate","decorateChildren","Skia","blend","BlendMode","enumKey","mode","imageFilters","popAll","length","composer","MakeBlend","bind","push","composeDeclarations","shaders","Shader"],"sources":["BlendNode.ts"],"sourcesContent":["import type { BlendProps } from \"../../types/ImageFilters\";\nimport { BlendMode } from \"../../../skia/types\";\nimport { DeclarationType, NodeType } from \"../../types/NodeType\";\nimport type { NodeContext } from \"../Node\";\nimport { JsiDeclarationNode } from \"../Node\";\nimport { enumKey } from \"../datatypes\";\nimport type { DeclarationContext } from \"../../types/DeclarationContext\";\nimport { composeDeclarations } from \"../../types/DeclarationContext\";\n\nexport class BlendNode extends JsiDeclarationNode<BlendProps> {\n  constructor(ctx: NodeContext, props: BlendProps) {\n    super(ctx, DeclarationType.ImageFilter, NodeType.Blend, props);\n  }\n\n  decorate(ctx: DeclarationContext) {\n    this.decorateChildren(ctx);\n    const { Skia } = this;\n    const blend = BlendMode[enumKey(this.props.mode)];\n    // Blend ImageFilters\n    const imageFilters = ctx.imageFilters.popAll();\n    if (imageFilters.length > 0) {\n      const composer = Skia.ImageFilter.MakeBlend.bind(Skia.ImageFilter, blend);\n      ctx.imageFilters.push(composeDeclarations(imageFilters, composer));\n    }\n    // Blend Shaders\n    const shaders = ctx.shaders.popAll();\n    if (shaders.length > 0) {\n      const composer = Skia.Shader.MakeBlend.bind(Skia.Shader, blend);\n      ctx.shaders.push(composeDeclarations(shaders, composer));\n    }\n  }\n}\n"],"mappings":";;;;;;;AACA;;AACA;;AAEA;;AACA;;AAEA;;AAEO,MAAMA,SAAN,SAAwBC,wBAAxB,CAAuD;EAC5DC,WAAW,CAACC,GAAD,EAAmBC,KAAnB,EAAsC;IAC/C,MAAMD,GAAN,EAAWE,yBAAA,CAAgBC,WAA3B,EAAwCC,kBAAA,CAASC,KAAjD,EAAwDJ,KAAxD;EACD;;EAEDK,QAAQ,CAACN,GAAD,EAA0B;IAChC,KAAKO,gBAAL,CAAsBP,GAAtB;IACA,MAAM;MAAEQ;IAAF,IAAW,IAAjB;;IACA,MAAMC,KAAK,GAAGC,gBAAA,CAAU,IAAAC,kBAAA,EAAQ,KAAKV,KAAL,CAAWW,IAAnB,CAAV,CAAd,CAHgC,CAIhC;;;IACA,MAAMC,YAAY,GAAGb,GAAG,CAACa,YAAJ,CAAiBC,MAAjB,EAArB;;IACA,IAAID,YAAY,CAACE,MAAb,GAAsB,CAA1B,EAA6B;MAC3B,MAAMC,QAAQ,GAAGR,IAAI,CAACL,WAAL,CAAiBc,SAAjB,CAA2BC,IAA3B,CAAgCV,IAAI,CAACL,WAArC,EAAkDM,KAAlD,CAAjB;MACAT,GAAG,CAACa,YAAJ,CAAiBM,IAAjB,CAAsB,IAAAC,uCAAA,EAAoBP,YAApB,EAAkCG,QAAlC,CAAtB;IACD,CAT+B,CAUhC;;;IACA,MAAMK,OAAO,GAAGrB,GAAG,CAACqB,OAAJ,CAAYP,MAAZ,EAAhB;;IACA,IAAIO,OAAO,CAACN,MAAR,GAAiB,CAArB,EAAwB;MACtB,MAAMC,QAAQ,GAAGR,IAAI,CAACc,MAAL,CAAYL,SAAZ,CAAsBC,IAAtB,CAA2BV,IAAI,CAACc,MAAhC,EAAwCb,KAAxC,CAAjB;MACAT,GAAG,CAACqB,OAAJ,CAAYF,IAAZ,CAAiB,IAAAC,uCAAA,EAAoBC,OAApB,EAA6BL,QAA7B,CAAjB;IACD;EACF;;AArB2D"}